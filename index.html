<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- 如旧浏览器不支持shadowDOM, 使用以下polyfill -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.5.0/webcomponents-bundle.min.js"></script> -->
  <script>
    document.querySelector('html').setAttribute('lang', Math.random() > 0.5 ? 'zh-Hans' : 'en-us');
  </script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/eruda@2.5.0/eruda.min.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/web-assistant@latest/lib/index.min.js"></script> -->
  <script type="module" src="./lib/index.js"></script>
  <title>web-assistant</title>
  <style>
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    /*滑块*/
    ::-webkit-scrollbar-thumb {
      background-color: #bbb;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background-color: #999;
    }

    /*滑道*/
    ::-webkit-scrollbar-track {
      box-shadow: inset 0 0 5px #ddd;
      border-radius: 4px;
    }

    html,
    body {
      width: 100vw;
      height: 100vh;
      padding: 0;
      margin: 0;
      background-color: #fefbec;
      overflow-x: auto;
      overflow-y: hidden;
    }

    .filter {
      position: fixed;
      z-index: 2;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.5);
    }

    #textarea {
      position: absolute;
      z-index: 3;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      margin: auto auto;
      padding: 1em;
      width: 70vw;
      height: 50vh;
      outline: none;
    }

    .btns {
      position: absolute;
      display: flex;
      justify-content: space-between;
      z-index: 3;
      bottom: 19vh;
      left: 0;
      right: 0;
      width: 14em;
      margin: 0 auto;
      font-size: 18px;
    }

    .btn-exec {
      width: 6em;
      font-size: 18px;
    }

    .btn-close {
      width: 6em;
      font-size: 18px;
    }

    button {
      margin: 2px 0;
    }

    button.code {
      color: #888;
    }

    h1 {
      font-size: 20px;
      line-height: 50px;
      height: 50px;
      overflow: hidden;
      margin: 0;
      padding: 5px 0 5px 20px;
      color: #333;
      text-align: left;
    }

    h1 a {
      position: absolute;
      right: 20px;
      top: 5px;
      font-size: 16px;
    }

    .card {
      position: relative;
      height: calc(100vh - 125px);
      margin: 0 12px;
      background: #fff;
      outline: 1px solid #eee;
      overflow-x: hidden;
      overflow-y: auto;
    }

    .txt {
      line-height: 1.75;
      margin: 1em 0;
    }
  </style>
  <script class="real-code">
    window.onload = function () {
      var filter = document.querySelector('.filter');
      var textarea = document.querySelector('#textarea');
      var exec = document.querySelector('.btn-exec');
      var close = document.querySelector('.btn-close');
      window.addEventListener('feedback!!', function (e) {
        console.log(e);
      });
      window.startGuideline = function () {
        window.webAssistant.guideline({
          list: [
            {
              selector: 'table',
              position: 'top-start',
              text: '<b>释义</b>:\n抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。',
              maxWidth: '340px',
              onNext: () => console.log('next')
            },
            {
              selector: 'span.txt + .txt',
              position: 'top-start',
              text: '抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。',
              maxWidth: '380px',
              onPrev: () => console.log('prev')
            },
            {
              selector: '.btn',
              position: 'right',
              text: '抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。',
              width: '300px',
              onNext: async () => {
                console.log('You can use async function here');
                await window.webAssistant.sleep(500);
                console.log('500 milliseconds passed');
              }
            },
            {
              selector: '.btn2',
              position: 'left-end',
              text: '抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。',
              width: '240px'
            }
          ],
          dangerouslyUseHTMLString: true,
          canClose: true,
          showSteps: true,
          confirmText: '我已阅读并遵守',
          onConfirm: () => {
            console.log('confirmed');
            document.querySelector('.card').scrollTo(0, 0);
          }
        });
      }
      window.startIntroduction = function () {
        window.webAssistant.intro({
          title: '1.20版本新特性',
          list: [
            {
              id: 0,
              text: '抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。 不同于接口，抽象类可以包含成员的实现细节。 abstract关键字是用于定义抽象类和在抽象类内部定义抽象方法。\n这是第二行文字.'
            },
            {
              id: 1,
              text: '这是第1行文字;\n抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。 不同于接口，抽象类可以包含成员的实现细节。 abstract关键字是用于定义抽象类和在抽象类内部定义抽象方法。抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。 不同于接口，抽象类可以包含成员的实现细节。 abstract关键字是用于定义抽象类和在抽象类内部定义抽象方法。抽象类做为其它派生类的基类使用。 它们一般不会直接被实例化。 不同于接口，抽象类可以包含成员的实现细节。 abstract关键字是用于定义抽象类和在抽象类内部定义抽象方法。'
            },
            {
              id: 2,
              text: '这是<b>一段</b>富文本<img src="https://news-bos.cdn.bcebos.com/mvideo/log-news.png" alt="baidu" style="height: 36px" />'
            }
          ],
          dangerouslyUseHTMLString: true,
          showSteps: true,
          canClose: true,
          onClose: () => console.log('closed'),
          confirmText: '我知道了',
          onConfirm: () => console.log('confirmed'),
          style: {
            width: '80vw',
            height: '350px'
          }
        });
      }
      window.showFeedback = function () {
        window.webAssistant.feedback({
          // title: '我要吐槽...',
          bottom: '10px',
          folded: true,
          fullNameVisible: true,
          emailVisible: true,
          emailRequired: true,
          problemVisible: true,
          problemList: [
            {
              label: '系统功能',
              value: 'system'
            },
            {
              label: '用户体验',
              value: 'uex'
            },
            {
              label: '其他',
              value: 'other'
            }
          ],
          screenshotNeeded: true,
          placeholder: '新功能上线，请您试用后留下宝贵意见',
          callback: fd => {
            console.log(fd);
            console.log('You can upload the formdata to your own backend api using window.fetch or some lib else');
            window.webAssistant.toast('formData has been outputted to the console');
            // fetch example ↓
            fetch('/some-api/feedback/submit', {
              method: 'POST',
              body: fd
            });
          }
        });
      }
      window.hideFeedback = function () {
        window.webAssistant.feedback.clear();
      }
      window.showCursor1 = function () {
        window.webAssistant.cursor({
          from: '500, 100',
          to: 'button.btn',
          duration: 1500
        });
      }
      window.showCursor2 = function () {
        window.webAssistant.cursor({
          type: 'reverse',
          scale: 0.75,
          to: 'button.code.cursor',
          duration: 1000,
          clickAfterMove: true,
          clickEffect: true
        });
      }
      window.showCursor3 = function () {
        window.webAssistant.cursor({
          type: 'pointer', // default, reverse, pointer, move, grab
          scale: 2,
          from: document.body,
          to: 'table',
          duration: 1500,
          stay: 1000,
          highlight: true,
          clickAfterMove: true,
          clickEffect: true,
          overlay: true
        }).then(() => {
          console.log('promise resolved...');
        });
      }
      window.showWatermark = function () {
        window.webAssistant.watermark({
          persisted: true,
          color: '#ddd',
          dotSize: 5,
          dotGap: 15,
          patternGap: 165,
          patterns: [
            [
              [1, 0, 0],
              [1, 1, 1],
              [0, 1, 1]
            ],
            [
              [1, 1, 0],
              [1, 0, 0],
              [1, 0, 0]
            ],
            [
              [0, 0, 0],
              [0, 0, 1],
              [0, 1, 1]
            ],
            [
              [1, 0, 0],
              [0, 1, 0],
              [1, 0, 0]
            ],
            [
              [0, 1, 1],
              [1, 0, 0],
              [0, 0, 0]
            ]
          ]
        });
      }
      window.hideWatermark = function () {
        window.webAssistant.watermark(false);
      }
      window.showToast1 = function () {
        window.webAssistant
          .toast({ text: 'Hello world!', duration: 1800 })
          .then(() => {
            console.log('toast has been dismissed');
          });
      }
      window.showToast2 = function () {
        window.webAssistant.toast({ text: 'test message...', position: 'top', duration: 3000 });
      }
      window.showMask = function () {
        window.webAssistant.mask({ duration: 1500 }).then(() => console.log('mask has been dismissed'));
      }
      window.getStr = function (func) {
        var str = func.toString();
        str = str.replace(/^function \(\S*\) \{/, '').replace(/\}$/, '').replace(/        /g, '').trim();
        filter.style = 'display: block';
        textarea.value = str;
      }
      window.hideFilter = function () {
        filter.style = 'display: none';
      }
      exec.onclick = function () {
        window.hideFilter();
        var str = textarea.value;
        eval(str);
      }
      close.onclick = function () {
        hideFilter();
      }
    };
  </script>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1b0215955c5575760e02bbb08daf00";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</head>

<body>
  <div class="filter" style="display: none;">
    <textarea id="textarea" cols="30" rows="10"></textarea>
    <div class="btns">
      <button class="btn-close">close</button>
      <button class="btn-exec">execute</button>
    </div>
  </div>
  <h1>
    <span>web-assistant live demo</span>
    <a href="https://github.com/icheer/web-assistant" target="_blank">Github</a>
  </h1>
  <div class="card" style="padding: 25px">
    <button onclick="startGuideline()">Start guideline</button>
    <button class="code" onclick="getStr(startGuideline)">show code...</button>
    <br>
    <br>
    <button onclick="startIntroduction()">Start introduction</button>
    <button class="code" onclick="getStr(startIntroduction)">show code...</button>
    <br>
    <br>
    <button onclick="showFeedback()">Show feedback (in the bottom right corner)</button>
    <button class="code" onclick="getStr(showFeedback)">show code...</button>
    <button onclick="hideFeedback()">Hide feedback</button>
    <button class="code" onclick="getStr(hideFeedback)">show code...</button>
    <br>
    <br>
    <button onclick="showCursor1()">Show cursor (let the fake cursor move)</button>
    <button class="code" onclick="getStr(showCursor1)">show code...</button>
    <button onclick="showCursor2()">Show cursor (even click after moving)</button>
    <button class="code cursor" onclick="getStr(showCursor2)">show code...</button>
    <button onclick="showCursor3()">Show cursor (5 cursor appearance)</button>
    <button class="code" onclick="getStr(showCursor3)">show code...</button>
    <br>
    <br>
    <button onclick="showWatermark()">Show watermark</button>
    <button class="code" onclick="getStr(showWatermark)">show code...</button>
    <!-- <button onclick="hideWatermark()">Hide watermark</button>
    <button class="code" onclick="getStr(hideWatermark)">show code...</button> -->
    <small style="color: red; font-weight: 700;">&nbsp;← New!</small>
    <br>
    <br>
    <button onclick="showMask()">Show mask</button>
    <button class="code" onclick="getStr(showMask)">show code...</button>
    <br>
    <br>
    <button onclick="showToast1()">Show toast: 1</button>
    <button onclick="showToast2()">Show toast: 2</button>
    <button class="code" onclick="getStr(showToast1)">show code...</button>
    <table class="table" border="1"
      style="margin-left: 20px; margin-top: 50px; padding: 10px; border: 1px solid #eee; background-color: #fff; border-collapse: collapse;">
      <colgroup style="width: 60px"></colgroup>
      <colgroup style="width: 60px"></colgroup>
      <colgroup style="width: 60px"></colgroup>
      <thead>
        <tr>
          <th>Col1</th>
          <th>Col2</th>
          <th>Col3</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>A1</td>
          <td>B1</td>
          <td>C1</td>
        </tr>
        <tr>
          <td>A2</td>
          <td>B2</td>
          <td>C2</td>
        </tr>
        <tr>
          <td>A3</td>
          <td>B3</td>
          <td>C3</td>
        </tr>
      </tbody>
    </table>
    <button class="btn" style="margin-top: 50px;">Read...</button>
    <span class="txt">She borrowed the book from him many years ago and hasn't yet returned it. He set out for a short
      walk, but now all he could see were mangroves and water were for miles. She used her own hair in the soup to give
      it more flavor. She finally understood that grief was her love with no place for it to go. The efficiency with
      which he paired the socks in the drawer was quite admirable. When money was tight, he'd get his lunch money from
      the local wishing well. He liked to play with words in the bathtub. </span>
    <div class="txt">The efficiency with which he paired the socks in the drawer was quite admirable.
      When money was tight, he'd get his lunch money from the local wishing well.
      He liked to play with words in the bathtub.</div>
    <div class="txt">Everyone was busy, so I went to the movie alone. She was sad to hear that fireflies are facing
      extinction due to artificial light, habitat loss, and pesticides. Wisdom is easily acquired when hiding under the
      bed with a saucepan on your head.</div>
    <div class="txt">He was 100% into fasting with her until he understood that meant he couldn't eat. Gwen had her best
      sleep ever on her new bed of nails. Tom got a small piece of pie. I would have gotten the promotion, but my
      attendance wasn’t good enough.</div>
    <div class="txt">Everyone was busy, so I went to the movie alone. She was sad to hear that fireflies are facing
      extinction due to artificial light, habitat loss, and pesticides. Wisdom is easily acquired when hiding under the
      bed with a saucepan on your head.</div>
    <div class="txt">He was 100% into fasting with her until he understood that meant he couldn't eat. Gwen had her best
      sleep ever on her new bed of nails. Tom got a small piece of pie. I would have gotten the promotion, but my
      attendance wasn’t good enough.</div>
    <div class="txt">Everyone was busy, so I went to the movie alone. She was sad to hear that fireflies are facing
      extinction due to artificial light, habitat loss, and pesticides. Wisdom is easily acquired when hiding under the
      bed with a saucepan on your head.</div>
    <div class="txt">He was 100% into fasting with her until he understood that meant he couldn't eat. Gwen had her best
      sleep ever on her new bed of nails. Tom got a small piece of pie. I would have gotten the promotion, but my
      attendance wasn’t good enough.</div>
    <div class="txt">Everyone was busy, so I went to the movie alone. She was sad to hear that fireflies are facing
      extinction due to artificial light, habitat loss, and pesticides. Wisdom is easily acquired when hiding under the
      bed with a saucepan on your head.</div>
    <div class="txt">He was 100% into fasting with her until he understood that meant he couldn't eat. Gwen had her best
      sleep ever on her new bed of nails. Tom got a small piece of pie. I would have gotten the promotion, but my
      attendance wasn’t good enough.</div>
    <button class="btn2"
      style="margin-top: 50px; margin-left: 230px; margin-bottom: 100px; width: 5.5em; height: 2em; font-size: 1.4em">Submit</button>
  </div>
</body>

</html>